<div class="container mt-5">
  <h2 class="mb-4 text-center"><%= @project.name %> のスタッフ一覧</h2>

  <div class="container" style="max-width: 720px;">
    <%= search_form_for @q, url: project_staffs_path(@project), method: :get, html: { class: "row g-2 align-items-center mb-3" } do |f| %>
      <div class="col-md-4">
        <%= f.search_field :name_cont, class: "form-control", placeholder: "名前" %>
      </div>

      <div class="col-md-4">
        <%= f.search_field :position_cont, class: "form-control", placeholder: "役職" %>
      </div>

      <div class="col-md-3 d-flex justify-content-end gap-2">
        <%= f.submit "検索", class: "btn btn-primary flex-fill" %>
        <%= link_to "全件", project_staffs_path(@project), class: "btn btn-outline-secondary flex-fill" %>
      </div>
    <% end %>
  </div>

  <% if @staffs.any? %>
    <div class="table-responsive" style="max-width: 100%; overflow-x: auto;">
      <table class="table table-striped table-bordered align-middle shadow-sm mx-auto" style="width: 800px;">
        <thead class="table-primary">
          <tr>
            <th scope="col">名前</th>
            <th scope="col">役職</th>
            <th scope="col">備考</th>
            <th scope="col" class="text-center" style="width: 160px;"></th>
          </tr>
        </thead>
        <tbody>
          <% @staffs.each do |staff| %>
            <tr>
              <td class="fw-bold">
                <i class="bi bi-person-fill me-2 text-secondary"></i><%= staff.name %>
              </td>
              <td><%= staff.position.presence || "未設定" %></td>
              <td><%= staff.comment.presence || "-" %></td>
              <td class="text-center">
                <%= link_to "編集", edit_project_staff_path(@project, staff), class: "btn btn-sm btn-outline-success me-2" %>
                <%= link_to "削除", project_staff_path(@project, staff),
                            data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" },
                            class: "btn btn-sm btn-outline-danger" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="alert alert-info text-center shadow-sm">
      まだスタッフが登録されていません。
    </div>
  <% end %>

  <div class="pagination-wrapper text-center">
  <%= paginate @staffs, theme: 'bootstrap-5',
              pagination_class: "pagination-sm flex-wrap justify-content-center",
              nav_class: "d-inline-block" %>
  </div>
  <div class="mt-4 text-center">
    <%= link_to "新規登録", new_project_staff_path(@project), class: "btn btn-warning btn-lg shadow" %>
  </div>
</div>