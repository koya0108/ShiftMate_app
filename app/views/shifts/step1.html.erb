<div class="container mt-4" style="max-width: 700px;">
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <h2 class="card-title mb-4 text-center text-primary">
        スタッフ・休憩室選択
      </h2>

      <p class="text-center text-muted mb-4">
        選択された日付: <span class="fw-bold"><%= @date.presence || params[:date] %></span>
      </p>

      <%= form_with url: step1_create_project_shifts_path(@project), method: :post, local: true do %>
        <%= hidden_field_tag :date, @date || params[:date] %>
        <%= hidden_field_tag :shift_id, params[:shift_id] %>

        <!-- スタッフ選択 -->
        <div class="mb-4">
          <%= label_tag :staff_ids, "スタッフを選択 (複数可)", class: "form-label fw-bold" %>
          <%= select_tag "staff_ids[]",
                options_from_collection_for_select(@staffs, :id, :name, @selected_staff_ids),
                multiple: true,
                class: "form-select tom-select" %>
          <small class="text-muted">検索や複数選択が可能です</small>
        </div>

        <!-- 休憩所選択 -->
        <div class="mb-4">
          <%= label_tag :break_room_ids, "休憩室を選択 (複数可)", class: "form-label fw-bold" %>
          <%= select_tag "break_room_ids[]",
                options_from_collection_for_select(@break_rooms, :id, :name, @selected_break_room_ids),
                multiple: true,
                class: "form-select tom-select" %>
          <small class="text-muted">複数の休憩室を割り当て可能です</small>
        </div>

        <div class="text-center">
          <%= submit_tag "次へ", class: "btn btn-primary px-5" %>
        </div>
      <% end %>
    </div>
  </div>
</div>